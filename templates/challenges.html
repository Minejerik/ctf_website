{% extends 'base.html' %}

{% block title %}
Challenges
{% endblock %}


{% block content %}
<br><br>
<div class="container text-center">
    <div class="row">
      <div class="col-4">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title" id="currentName">{{challenges[0].name}}</h4>
                <p class="card-text">
                    <div id="currentDesc">{{challenges[0].desc}}</div>
                    <hr>
                    <br><br><br><br><br><br><br><br>
                    <div id="currentSolve">Solve Count: {{challenges[0].solve_count}}</div>
                    <div id="currentScore">Reward: {{challenges[0].points}} points</div>
                    <br>
                    <div class="input-group mb-3">
                        <input type="text" placeholder="CTF_NAME{}" class="form-control">
                        <button type="button" class="btn btn-success">Submit</button>
                    </div>              
                </p>
            </div>
        </div>
      </div>
      <div class="col-8">
        <div class="overflow-y-scroll overflow-x-hidden">
            <div class="row">
                {% for challenge in challenges %}
                <div class="col-4">
                    <div class="card">
                        <div class="card-header">
                            {{challenge.name}}
                        </div>                        
                        <div class="card-body">
                            <p class="card-text">{{challenge.desc}}</p>
                            <a href="javascript:show({{challenge.id}}, '{{challenge.name}}', '{{challenge.desc}}', {{challenge.solve_count}}, {{challenge.points}})" class="stretched-link">Play</a>
                        </div>
                        <div class="card-footer">
                            {{challenge.solve_count}} solves {{challenge.points}} points
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
      </div>
    </div>
</div>  

<script>
    var current_id = parseInt("{{challenges[0].id}}")

    function show(id, name, desc, solvecount, points) {
        current_id = id
        document.getElementById("currentName").innerText = name
        document.getElementById("currentDesc").innerText = desc
        document.getElementById("currentSolve").innerText = "Solve Count: "+solvecount
        document.getElementById("currentScore").innerText = "Reward: "+ points +" points"
        // document.getElementById("currentDesc").innerText = points

        
        
    }
</script>
{% endblock %}